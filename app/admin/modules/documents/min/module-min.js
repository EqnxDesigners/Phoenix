$(document).ready(function(){function e(e,t){$(e).addClass("masked"),$(t).removeClass("masked")}function t(e){$(".overlayed-panel").animate({left:e},"fast")}urlAjaxModule="./modules/documents/ajax.php",$("nav").on("click",".btn",function(){var t=$(this).attr("role");"add"===t&&(e("#mnu-gest","#return-to-gest"),e("#wrapper-display","#wrapper-adding")),"back-to-gest"===t&&(e("#return-to-gest","#mnu-gest"),e("#wrapper-adding","#wrapper-display"))}),$(".listing").on("click",".btn",function(){var e=$(this).attr("role"),n=$(this).attr("item");"media-lock"===e&&$.post(urlAjaxModule,{a:"changePrivacy",idItem:n,newValue:"1"}).done(function(e){$("#wrapper-gestion").empty().append(e)}),"media-unlock"===e&&$.post(urlAjaxModule,{a:"changePrivacy",idItem:n,newValue:"0"}).done(function(e){$("#wrapper-gestion").empty().append(e)}),"media-share"===e&&$.post(urlAjaxModule,{a:"loadClient",idItem:n}).done(function(e){$("#Container").empty().append(e),$("#Container").mixItUp(),t("17px")})}),$("#module-wrapper").on("click",".fa-arrow-left",function(){t("-1500px")}),$("#wrapper-adding").on("change","select",function(){console.log($(this).val()),"xxx"!==$(this).val()?$("#file-uploader").slideDown("fast"):$("#file-uploader").slideUp("fast")}),$("#Container").mixItUp(),$("#Container").on("click",".row",function(){$(this).is(".active")?($(this).removeClass("active"),$("i",this).hide()):($(this).addClass("active"),$("i",this).show())});var n=document.getElementById("dropArea"),a=document.getElementById("count"),o=document.getElementById("url"),i=document.getElementById("result"),r=[],s=0,l=0;!function(){function e(){n.addEventListener("drop",d,!1),n.addEventListener("dragover",a,!1)}function t(e){var t=Math.floor(100*e),n="";n=100>t?currentProgress+" %":"Transfère terminée",$("#progress-bar").show().css({width:t+"%"}),$("#progress-bar").html(n),100===t&&$("#progress-bar").delay(3e3).fadeOut("fast")}function a(e){e.stopPropagation(),e.preventDefault(),n.className="hover"}function d(e){e.stopPropagation(),e.preventDefault(),p(e.dataTransfer.files)}function p(e){if(e&&e.length&&!r.length){s=0,l=0,i.textContent="";for(var t=0;t<e.length&&1>t;t++)r.push(e[t]),s+=e[t].size;m()}}function u(e){l+=e,t(l/s),m()}function c(e){var n=l+e.loaded;t(n/s)}function f(e,t){var n=new XMLHttpRequest;n.open("POST",o.value),n.onload=function(){i.innerHTML+=this.responseText,u(e.size)},n.onerror=function(){i.textContent=this.responseText,u(e.size)},n.upload.onprogress=function(e){c(e)},n.upload.onloadstart=function(e){};var a=new FormData;a.append("myfile",e),n.send(a),$('input[name="file_name"]').val(e.name)}function m(){if(r.length){n.className="uploading";var e=r.shift();e.size>=20971520?(i.innerHTML+='<div class="f">Fichier trop gros (dépassement de la taille maximale)</div>',u(e.size)):f(e,status)}else n.className=""}e()}()});